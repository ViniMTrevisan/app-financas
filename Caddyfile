https://financasbackend.duckdns.org {

# Captura requisições preflight (OPTIONS) e responde 204
    @preflight {
                   method OPTIONS
               }
    respond @preflight 204 {
                               header Access-Control-Allow-Origin "https://app-financas-vinidev.vercel.app"
                               header Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS, PATCH"
                               header Access-Control-Allow-Headers "Authorization, Content-Type"
                               header Access-Control-Allow-Credentials "true"
                           }

# Proxy para o backend Spring Boot
    reverse_proxy backend:8081 {
                                   header_up X-Forwarded-Host {host}
                                   header_up X-Forwarded-Proto {scheme}
                                   header_up X-Forwarded-For {remote_host}
                               }

# Adiciona headers CORS em todas as respostas do backend
    header {
               Access-Control-Allow-Origin "https://app-financas-vinidev.vercel.app"
               Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS, PATCH"
               Access-Control-Allow-Headers "Authorization, Content-Type"
               Access-Control-Allow-Credentials "true"
           }
}